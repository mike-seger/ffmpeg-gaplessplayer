<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Gapless 5 Player</title>
  <meta name="viewport" content="width=400">
  <link rel="stylesheet" href="./gapless5.css" type="text/css">
  <script type='text/javascript' src='./gapless5.js'></script>
  <script type="text/javascript" src="./gapless5.js"></script>
  <style type="text/css">
    body { font-family: Arial, Helvetica, Geneva, sans-serif; margin: 0.5em; }
    p { font-size: 75%; }
  </style>
</head>
<body>
    <span id="g5-album">
    <div class="g5positionbar" id="g5positionbar-g5-album" style="width: 115px;">
      <span id="g5position-g5-album">01:38.55</span> |
      <span id="g5duration-g5-album">05:12.79</span> |
      <span id="g5index-g5-album">11</span>/<span id="g5numtracks-g5-album">12</span>
    </div>
    <div class="g5inside" id="g5inside-g5-album" style="width: 115px;">
      
    <div class="g5transport">
      <div class="g5meter" id="g5meter-g5-album" style="width: 111px;"><span id="g5loadedspan-g5-album" style="width: 0%"></span></div>
      <input type="range" class="transportbar" name="transportbar" 
        id="g5transportbar-g5-album" min="0" max="65535" value="0" 
        oninput="gapless5Players[&#39;g5-album&#39;].scrub(this.value);" 
        onmousedown="gapless5Players[&#39;g5-album&#39;].onStartedScrubbing();" 
        ontouchstart="gapless5Players[&#39;g5-album&#39;].onStartedScrubbing();" 
        onmouseup="gapless5Players[&#39;g5-album&#39;].onFinishedScrubbing();" 
        ontouchend="gapless5Players[&#39;g5-album&#39;].onFinishedScrubbing();" 
        style="width: 111px;">
    </div>

    <div class="g5buttons" id="g5buttons-g5-album">
      <button class="g5button g5prev enabled" id="g5prev-g5-album"></button>
      <button class="g5button g5play enabled" id="g5play-g5-album"></button>
      <button class="g5button g5stop enabled" id="g5stop-g5-album"></button>
      <button class="g5button g5next enabled" id="g5next-g5-album"></button>
      <input type="range" id="g5volume-g5-album" class="volume" name="gain" min="0" max="65535" 
        value="65535" oninput="gapless5Players[&#39;g5-album&#39;].setVolume(this.value / 65535);">
    </div>
  
    </div>
  </span>

  <p>Title: <span id="album-title">Headphones</span><br></p>

  <script type="text/javascript">
    const logLevel = LogLevel.Debug;
    let speedToggle = false;
    let volumeToggle = false;
    const albumPlayer = new Gapless5({
      guiId: 'g5-album',
      tracks: [
        'alpha - space dream - 01. das licht - traumwelten',
        'alpha - space dream - 02. vectrex - meteor (armageddon club mix)',
        'alpha - space dream - 03. jupiter prime - gate to heaven',
        'alpha - space dream - 04. armin - communication',
      ].map(file => `../tracks/${file}.flac`),
      logLevel,
      shuffleButton: false,
      //crossfade: crossfadeShortMS,
      loadLimit: 2,
    });

    const updateAlbumTitle = () => {
      const [ title ] = albumPlayer.currentSource().audioPath.split(' - ')[1].split('.');
      document.getElementById('album-title').innerHTML = title;
    };
    updateAlbumTitle();
    albumPlayer.onprev = updateAlbumTitle;
    albumPlayer.onnext = updateAlbumTitle;
  </script>
</body>
</html>
